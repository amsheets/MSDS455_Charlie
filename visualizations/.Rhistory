pal_heart <- c("#ff0000", "#7f0000", "#ff6666",  "#ffb2b2", "#E9967A","#A52A2A")
blue_heart <- "#3F69AA"
# set working directory
setwd("~/Documents/GradSchool/MSDS455/git_repos/MSDS455_Charlie/data")
df <- read.table(file="slide8_smoking.txt",sep="\t",header=TRUE,quote="")
df$start = mdy(df$start)
df$text = factor(df$text,levels = levels(df$text)[c(6,3,2,1,4:5)])
status_colors <- c("#ff0000", "#7f0000", "#ff6666",  "#ffb2b2", "#E9967A","#A52A2A")
positions <- c(0.5, -0.5, 1.0, -1.0, 1.5, -1.5)
directions <- c(1, -1)
line_pos <- data.frame(
"start"=unique(df$start),
"position"=rep(positions, length.out=length(unique(df$start))),
"direction"=rep(directions, length.out=length(unique(df$start)))
)
df <- merge(x=df, y=line_pos, by="start", all = TRUE)
df <- df[with(df, order(start)), ]
text_offset <- 0.05
df$month_count <- ave(df$start==df$start, df$start, FUN=cumsum)
df$text_position <- (df$month_count * text_offset * df$direction) + df$position
head(df)
month_buffer <- 10
month_date_range <- seq(min(df$start) - months(month_buffer), max(df$start) + months(month_buffer), by='month')
month_format <- format(month_date_range, '%b')
month_df <- data.frame(month_date_range, month_format)
year_date_range <- seq(min(df$start) - months(month_buffer), max(df$start) + months(month_buffer), by='year')
year_date_range <- as.Date(
intersect(
ceiling_date(year_date_range, unit="year"),
floor_date(year_date_range, unit="year")
),  origin = "1970-01-01"
)
year_format <- format(year_date_range, '%Y')
year_df <- data.frame(year_date_range, year_format)
#### PLOT ####
timeline_plot<-ggplot(df,aes(x=start,y=0, col=text))
timeline_plot<-timeline_plot+labs(col="Milestones")
timeline_plot<-timeline_plot+scale_color_manual(values=rep(blue_heart,6), labels=c("Instantly","6 months","1 year","5 years","10 years","15 years"), drop = FALSE)
timeline_plot<-timeline_plot+theme_classic()
# Plot horizontal black line for timeline
timeline_plot<-timeline_plot+geom_hline(yintercept=0,
color = "black", size=0.3)
# Plot vertical segment lines for milestones
timeline_plot<-timeline_plot+geom_segment(data=df[df$month_count == 1,], aes(y=position,yend=0,xend=start), color=blue_heart, size=0.2)
# Plot scatter points at zero and date
timeline_plot<-timeline_plot+geom_point(aes(y=0), size=3,color=pal_heart)
timeline_plot<-timeline_plot+theme(axis.line.y=element_blank(),
axis.text.y=element_blank(),
axis.title.x=element_blank(),
axis.title.y=element_blank(),
axis.ticks.y=element_blank(),
axis.text.x =element_blank(),
axis.ticks.x =element_blank(),
axis.line.x =element_blank(),
legend.position = "none")
# Show text for each month
#timeline_plot<-timeline_plot+geom_text(data=month_df, aes(x=month_date_range,y=-0.1,label=month_format),size=2.5,vjust=0.5, color='black', angle=90)
# Show year text
timeline_plot<-timeline_plot+geom_text(data=year_df, aes(x=year_date_range,y=-0.2,label=year_format, fontface="bold"),size=2.5, color=blue_heart)
# Show text for each milestone
timeline_plot<-timeline_plot+geom_text(aes(y=text_position,label=stringr::str_wrap(text, 50)),size=5)
print(timeline_plot)
#Install Packages
list.of.packages <- c("ggplot2", "scales","lubridate")
new.packages <- list.of.packages[!(list.of.packages %in% installed.packages()[,"Package"])]
if(length(new.packages)) install.packages(new.packages)
lapply(list.of.packages, require, character.only = TRUE)
pal_heart <- c("#ff0000", "#7f0000", "#ff6666",  "#ffb2b2", "#E9967A","#A52A2A")
blue_heart <- "#3F69AA"
# set working directory
setwd("~/Documents/GradSchool/MSDS455/git_repos/MSDS455_Charlie/data")
df <- read.table(file="slide8_smoking.txt",sep="\t",header=TRUE,quote="")
df$start = mdy(df$start)
df$text = factor(df$text,levels = levels(df$text)[c(6,3,2,1,4:5)])
status_colors <- c("#ff0000", "#7f0000", "#ff6666",  "#ffb2b2", "#E9967A","#A52A2A")
positions <- c(0.5, -0.5, 1.0, -1.0, 1.5, -1.5)
directions <- c(1, -1)
line_pos <- data.frame(
"start"=unique(df$start),
"position"=rep(positions, length.out=length(unique(df$start))),
"direction"=rep(directions, length.out=length(unique(df$start)))
)
df <- merge(x=df, y=line_pos, by="start", all = TRUE)
df <- df[with(df, order(start)), ]
text_offset <- 0.05
df$month_count <- ave(df$start==df$start, df$start, FUN=cumsum)
df$text_position <- (df$month_count * text_offset * df$direction) + df$position
head(df)
month_buffer <- 16
month_date_range <- seq(min(df$start) - months(month_buffer), max(df$start) + months(month_buffer), by='month')
month_format <- format(month_date_range, '%b')
month_df <- data.frame(month_date_range, month_format)
year_date_range <- seq(min(df$start) - months(month_buffer), max(df$start) + months(month_buffer), by='year')
year_date_range <- as.Date(
intersect(
ceiling_date(year_date_range, unit="year"),
floor_date(year_date_range, unit="year")
),  origin = "1970-01-01"
)
year_format <- format(year_date_range, '%Y')
year_df <- data.frame(year_date_range, year_format)
#### PLOT ####
timeline_plot<-ggplot(df,aes(x=start,y=0, col=text))
timeline_plot<-timeline_plot+labs(col="Milestones")
timeline_plot<-timeline_plot+scale_color_manual(values=rep(blue_heart,6), labels=c("Instantly","6 months","1 year","5 years","10 years","15 years"), drop = FALSE)
timeline_plot<-timeline_plot+theme_classic()
# Plot horizontal black line for timeline
timeline_plot<-timeline_plot+geom_hline(yintercept=0,
color = "black", size=0.3)
# Plot vertical segment lines for milestones
timeline_plot<-timeline_plot+geom_segment(data=df[df$month_count == 1,], aes(y=position,yend=0,xend=start), color=blue_heart, size=0.2)
# Plot scatter points at zero and date
timeline_plot<-timeline_plot+geom_point(aes(y=0), size=3,color=pal_heart)
timeline_plot<-timeline_plot+theme(axis.line.y=element_blank(),
axis.text.y=element_blank(),
axis.title.x=element_blank(),
axis.title.y=element_blank(),
axis.ticks.y=element_blank(),
axis.text.x =element_blank(),
axis.ticks.x =element_blank(),
axis.line.x =element_blank(),
legend.position = "none")
# Show text for each month
#timeline_plot<-timeline_plot+geom_text(data=month_df, aes(x=month_date_range,y=-0.1,label=month_format),size=2.5,vjust=0.5, color='black', angle=90)
# Show year text
timeline_plot<-timeline_plot+geom_text(data=year_df, aes(x=year_date_range,y=-0.2,label=year_format, fontface="bold"),size=2.5, color=blue_heart)
# Show text for each milestone
timeline_plot<-timeline_plot+geom_text(aes(y=text_position,label=stringr::str_wrap(text, 50)),size=5)
print(timeline_plot)
setwd("~/Documents/GradSchool/MSDS455/git_repos/MSDS455_Charlie/visualizations")
png(file = "slide_8_smoking.png",width = 1000, height = 1000)
timeline_plot<-ggplot(df,aes(x=start,y=0, col=text))
timeline_plot<-timeline_plot+labs(col="Milestones")
timeline_plot<-timeline_plot+scale_color_manual(values=rep(blue_heart,6), labels=c("Instantly","6 months","1 year","5 years","10 years","15 years"), drop = FALSE)
timeline_plot<-timeline_plot+theme_classic()
# Plot horizontal black line for timeline
timeline_plot<-timeline_plot+geom_hline(yintercept=0,
color = "black", size=0.3)
# Plot vertical segment lines for milestones
timeline_plot<-timeline_plot+geom_segment(data=df[df$month_count == 1,], aes(y=position,yend=0,xend=start), color=blue_heart, size=0.2)
# Plot scatter points at zero and date
timeline_plot<-timeline_plot+geom_point(aes(y=0), size=3,color=pal_heart)
timeline_plot<-timeline_plot+theme(axis.line.y=element_blank(),
axis.text.y=element_blank(),
axis.title.x=element_blank(),
axis.title.y=element_blank(),
axis.ticks.y=element_blank(),
axis.text.x =element_blank(),
axis.ticks.x =element_blank(),
axis.line.x =element_blank(),
legend.position = "none")
# Show text for each month
#timeline_plot<-timeline_plot+geom_text(data=month_df, aes(x=month_date_range,y=-0.1,label=month_format),size=2.5,vjust=0.5, color='black', angle=90)
# Show year text
timeline_plot<-timeline_plot+geom_text(data=year_df, aes(x=year_date_range,y=-0.2,label=year_format, fontface="bold"),size=2.5, color=blue_heart)
# Show text for each milestone
timeline_plot<-timeline_plot+geom_text(aes(y=text_position,label=stringr::str_wrap(text, 50)),size=5)
print(timeline_plot)
dev.off()
#### PLOT ####
setwd("~/Documents/GradSchool/MSDS455/git_repos/MSDS455_Charlie/visualizations")
png(file = "slide_8_smoking.png",width = 1000, height = 1000)
timeline_plot<-ggplot(df,aes(x=start,y=0, col=text))
timeline_plot<-timeline_plot+labs(col="Milestones")
timeline_plot<-timeline_plot+scale_color_manual(values=rep(blue_heart,6), labels=c("Instantly","6 months","1 year","5 years","10 years","15 years"), drop = FALSE)
timeline_plot<-timeline_plot+theme_classic()
# Plot horizontal black line for timeline
timeline_plot<-timeline_plot+geom_hline(yintercept=0,
color = "black", size=0.3)
# Plot vertical segment lines for milestones
timeline_plot<-timeline_plot+geom_segment(data=df[df$month_count == 1,], aes(y=position,yend=0,xend=start), color=blue_heart, size=0.3)
# Plot scatter points at zero and date
timeline_plot<-timeline_plot+geom_point(aes(y=0), size=3,color=pal_heart)
timeline_plot<-timeline_plot+theme(axis.line.y=element_blank(),
axis.text.y=element_blank(),
axis.title.x=element_blank(),
axis.title.y=element_blank(),
axis.ticks.y=element_blank(),
axis.text.x =element_blank(),
axis.ticks.x =element_blank(),
axis.line.x =element_blank(),
legend.position = "none")
# Show text for each month
#timeline_plot<-timeline_plot+geom_text(data=month_df, aes(x=month_date_range,y=-0.1,label=month_format),size=2.5,vjust=0.5, color='black', angle=90)
# Show year text
timeline_plot<-timeline_plot+geom_text(data=year_df, aes(x=year_date_range,y=-0.2,label=year_format, fontface="bold"),size=2.5, color=blue_heart)
# Show text for each milestone
timeline_plot<-timeline_plot+geom_text(aes(y=text_position,label=stringr::str_wrap(text, 50)),size=5)
print(timeline_plot)
dev.off()
timeline_plot<-ggplot(df,aes(x=start,y=0, col=text))
timeline_plot<-timeline_plot+labs(col="Milestones")
timeline_plot<-timeline_plot+scale_color_manual(values=rep(blue_heart,6), labels=c("Instantly","6 months","1 year","5 years","10 years","15 years"), drop = FALSE)
timeline_plot<-timeline_plot+theme_classic()
# Plot horizontal black line for timeline
timeline_plot<-timeline_plot+geom_hline(yintercept=0,
color = "black", size=0.3)
# Plot vertical segment lines for milestones
timeline_plot<-timeline_plot+geom_segment(data=df[df$month_count == 1,], aes(y=position,yend=0,xend=start), color=blue_heart, size=0.3)
# Plot scatter points at zero and date
timeline_plot<-timeline_plot+geom_point(aes(y=0), size=3,color=pal_heart)
timeline_plot<-timeline_plot+theme(axis.line.y=element_blank(),
axis.text.y=element_blank(),
axis.title.x=element_blank(),
axis.title.y=element_blank(),
axis.ticks.y=element_blank(),
axis.text.x =element_blank(),
axis.ticks.x =element_blank(),
axis.line.x =element_blank(),
legend.position = "none")
# Show text for each month
#timeline_plot<-timeline_plot+geom_text(data=month_df, aes(x=month_date_range,y=-0.1,label=month_format),size=2.5,vjust=0.5, color='black', angle=90)
# Show year text
timeline_plot<-timeline_plot+geom_text(data=year_df, aes(x=year_date_range,y=-0.2,label=year_format, fontface="bold"),size=2.5, color=blue_heart)
# Show text for each milestone
timeline_plot<-timeline_plot+geom_text(aes(y=text_position,label=stringr::str_wrap(text, 50)),size=5)
print(timeline_plot)
#Install Packages
list.of.packages <- c("ggplot2", "scales","lubridate")
new.packages <- list.of.packages[!(list.of.packages %in% installed.packages()[,"Package"])]
if(length(new.packages)) install.packages(new.packages)
lapply(list.of.packages, require, character.only = TRUE)
pal_heart <- c("#ff0000", "#7f0000", "#ff6666",  "#ffb2b2", "#E9967A","#A52A2A")
blue_heart <- "#3F69AA"
# set working directory
setwd("~/Documents/GradSchool/MSDS455/git_repos/MSDS455_Charlie/data")
df <- read.table(file="slide8_smoking.txt",sep="\t",header=TRUE,quote="")
df$start = mdy(df$start)
df$text = factor(df$text,levels = levels(df$text)[c(6,3,2,1,4:5)])
status_colors <- c("#ff0000", "#7f0000", "#ff6666",  "#ffb2b2", "#E9967A","#A52A2A")
positions <- c(0.5, -0.5, 1.0, -1.0, 1.5, -1.5)
directions <- c(1, -1)
line_pos <- data.frame(
"start"=unique(df$start),
"position"=rep(positions, length.out=length(unique(df$start))),
"direction"=rep(directions, length.out=length(unique(df$start)))
)
df <- merge(x=df, y=line_pos, by="start", all = TRUE)
df <- df[with(df, order(start)), ]
text_offset <- 0.05
df$month_count <- ave(df$start==df$start, df$start, FUN=cumsum)
df$text_position <- (df$month_count * text_offset * df$direction) + df$position
head(df)
month_buffer <- 24
month_date_range <- seq(min(df$start) - months(month_buffer), max(df$start) + months(month_buffer), by='month')
month_format <- format(month_date_range, '%b')
month_df <- data.frame(month_date_range, month_format)
year_date_range <- seq(min(df$start) - months(month_buffer), max(df$start) + months(month_buffer), by='year')
year_date_range <- as.Date(
intersect(
ceiling_date(year_date_range, unit="year"),
floor_date(year_date_range, unit="year")
),  origin = "1970-01-01"
)
year_format <- format(year_date_range, '%Y')
year_df <- data.frame(year_date_range, year_format)
#### PLOT ####
setwd("~/Documents/GradSchool/MSDS455/git_repos/MSDS455_Charlie/visualizations")
png(file = "slide_8_smoking.png",width = 1000, height = 1000)
timeline_plot<-ggplot(df,aes(x=start,y=0, col=text))
timeline_plot<-timeline_plot+labs(col="Milestones")
timeline_plot<-timeline_plot+scale_color_manual(values=rep(blue_heart,6), labels=c("Instantly","6 months","1 year","5 years","10 years","15 years"), drop = FALSE)
timeline_plot<-timeline_plot+theme_classic()
# Plot horizontal black line for timeline
timeline_plot<-timeline_plot+geom_hline(yintercept=0,
color = "black", size=0.3)
# Plot vertical segment lines for milestones
timeline_plot<-timeline_plot+geom_segment(data=df[df$month_count == 1,], aes(y=position,yend=0,xend=start), color=blue_heart, size=0.3)
# Plot scatter points at zero and date
timeline_plot<-timeline_plot+geom_point(aes(y=0), size=3,color=pal_heart)
timeline_plot<-timeline_plot+theme(axis.line.y=element_blank(),
axis.text.y=element_blank(),
axis.title.x=element_blank(),
axis.title.y=element_blank(),
axis.ticks.y=element_blank(),
axis.text.x =element_blank(),
axis.ticks.x =element_blank(),
axis.line.x =element_blank(),
legend.position = "none")
# Show text for each month
#timeline_plot<-timeline_plot+geom_text(data=month_df, aes(x=month_date_range,y=-0.1,label=month_format),size=2.5,vjust=0.5, color='black', angle=90)
# Show year text
timeline_plot<-timeline_plot+geom_text(data=year_df, aes(x=year_date_range,y=-0.2,label=year_format, fontface="bold"),size=2.5, color=blue_heart)
# Show text for each milestone
timeline_plot<-timeline_plot+geom_text(aes(y=text_position,label=stringr::str_wrap(text, 50)),size=5)
print(timeline_plot)
dev.off()
timeline_plot<-ggplot(df,aes(x=start,y=0, col=text))
timeline_plot<-timeline_plot+labs(col="Milestones")
timeline_plot<-timeline_plot+scale_color_manual(values=rep(blue_heart,6), labels=c("Instantly","6 months","1 year","5 years","10 years","15 years"), drop = FALSE)
timeline_plot<-timeline_plot+theme_classic()
# Plot horizontal black line for timeline
timeline_plot<-timeline_plot+geom_hline(yintercept=0,
color = heart_blue, size=0.3)
# Plot vertical segment lines for milestones
timeline_plot<-timeline_plot+geom_segment(data=df[df$month_count == 1,], aes(y=position,yend=0,xend=start), color=blue_heart, size=0.3)
# Plot scatter points at zero and date
timeline_plot<-timeline_plot+geom_point(aes(y=0), size=3,color=pal_heart)
timeline_plot<-timeline_plot+theme(axis.line.y=element_blank(),
axis.text.y=element_blank(),
axis.title.x=element_blank(),
axis.title.y=element_blank(),
axis.ticks.y=element_blank(),
axis.text.x =element_blank(),
axis.ticks.x =element_blank(),
axis.line.x =element_blank(),
legend.position = "none")
# Show text for each month
#timeline_plot<-timeline_plot+geom_text(data=month_df, aes(x=month_date_range,y=-0.1,label=month_format),size=2.5,vjust=0.5, color='black', angle=90)
# Show year text
timeline_plot<-timeline_plot+geom_text(data=year_df, aes(x=year_date_range,y=-0.2,label=year_format, fontface="bold"),size=2.5, color=blue_heart)
# Show text for each milestone
timeline_plot<-timeline_plot+geom_text(aes(y=text_position,label=stringr::str_wrap(text, 50)),size=5)
print(timeline_plot)
timeline_plot<-ggplot(df,aes(x=start,y=0, col=text))
timeline_plot<-timeline_plot+labs(col="Milestones")
timeline_plot<-timeline_plot+scale_color_manual(values=rep(blue_heart,6), labels=c("Instantly","6 months","1 year","5 years","10 years","15 years"), drop = FALSE)
timeline_plot<-timeline_plot+theme_classic()
# Plot horizontal black line for timeline
timeline_plot<-timeline_plot+geom_hline(yintercept=0,
color = blue_heart, size=0.3)
# Plot vertical segment lines for milestones
timeline_plot<-timeline_plot+geom_segment(data=df[df$month_count == 1,], aes(y=position,yend=0,xend=start), color=blue_heart, size=0.3)
# Plot scatter points at zero and date
timeline_plot<-timeline_plot+geom_point(aes(y=0), size=3,color=pal_heart)
timeline_plot<-timeline_plot+theme(axis.line.y=element_blank(),
axis.text.y=element_blank(),
axis.title.x=element_blank(),
axis.title.y=element_blank(),
axis.ticks.y=element_blank(),
axis.text.x =element_blank(),
axis.ticks.x =element_blank(),
axis.line.x =element_blank(),
legend.position = "none")
# Show text for each month
#timeline_plot<-timeline_plot+geom_text(data=month_df, aes(x=month_date_range,y=-0.1,label=month_format),size=2.5,vjust=0.5, color='black', angle=90)
# Show year text
timeline_plot<-timeline_plot+geom_text(data=year_df, aes(x=year_date_range,y=-0.2,label=year_format, fontface="bold"),size=2.5, color=blue_heart)
# Show text for each milestone
timeline_plot<-timeline_plot+geom_text(aes(y=text_position,label=stringr::str_wrap(text, 50)),size=5)
print(timeline_plot)
png(file = "slide_8_smoking.png",width = 1600, height = 1600)
timeline_plot<-ggplot(df,aes(x=start,y=0, col=text))
timeline_plot<-timeline_plot+labs(col="Milestones")
timeline_plot<-timeline_plot+scale_color_manual(values=rep(blue_heart,6), labels=c("Instantly","6 months","1 year","5 years","10 years","15 years"), drop = FALSE)
timeline_plot<-timeline_plot+theme_classic()
# Plot horizontal black line for timeline
timeline_plot<-timeline_plot+geom_hline(yintercept=0,
color = blue_heart, size=0.3)
# Plot vertical segment lines for milestones
timeline_plot<-timeline_plot+geom_segment(data=df[df$month_count == 1,], aes(y=position,yend=0,xend=start), color=blue_heart, size=0.3)
# Plot scatter points at zero and date
timeline_plot<-timeline_plot+geom_point(aes(y=0), size=3,color=pal_heart)
timeline_plot<-timeline_plot+theme(axis.line.y=element_blank(),
axis.text.y=element_blank(),
axis.title.x=element_blank(),
axis.title.y=element_blank(),
axis.ticks.y=element_blank(),
axis.text.x =element_blank(),
axis.ticks.x =element_blank(),
axis.line.x =element_blank(),
legend.position = "none")
# Show text for each month
#timeline_plot<-timeline_plot+geom_text(data=month_df, aes(x=month_date_range,y=-0.1,label=month_format),size=2.5,vjust=0.5, color='black', angle=90)
# Show year text
timeline_plot<-timeline_plot+geom_text(data=year_df, aes(x=year_date_range,y=-0.2,label=year_format, fontface="bold"),size=2.5, color=blue_heart)
# Show text for each milestone
timeline_plot<-timeline_plot+geom_text(aes(y=text_position,label=stringr::str_wrap(text, 50)),size=5)
print(timeline_plot)
dev.off()
#Install Packages
list.of.packages <- c("ggplot2", "scales","lubridate")
new.packages <- list.of.packages[!(list.of.packages %in% installed.packages()[,"Package"])]
if(length(new.packages)) install.packages(new.packages)
lapply(list.of.packages, require, character.only = TRUE)
pal_heart <- c("#ff0000", "#7f0000", "#ff6666",  "#ffb2b2", "#E9967A","#A52A2A")
blue_heart <- "#3F69AA"
# set working directory
setwd("~/Documents/GradSchool/MSDS455/git_repos/MSDS455_Charlie/data")
df <- read.table(file="slide8_smoking.txt",sep="\t",header=TRUE,quote="")
df$start = mdy(df$start)
df$text = factor(df$text,levels = levels(df$text)[c(6,3,2,1,4:5)])
status_colors <- c("#ff0000", "#7f0000", "#ff6666",  "#ffb2b2", "#E9967A","#A52A2A")
positions <- c(0.25, -0.25, 0.75, -0.75, 1, -1)
directions <- c(1, -1)
line_pos <- data.frame(
"start"=unique(df$start),
"position"=rep(positions, length.out=length(unique(df$start))),
"direction"=rep(directions, length.out=length(unique(df$start)))
)
df <- merge(x=df, y=line_pos, by="start", all = TRUE)
df <- df[with(df, order(start)), ]
text_offset <- 0.05
df$month_count <- ave(df$start==df$start, df$start, FUN=cumsum)
df$text_position <- (df$month_count * text_offset * df$direction) + df$position
head(df)
month_buffer <- 2
month_date_range <- seq(min(df$start) - months(month_buffer), max(df$start) + months(month_buffer), by='month')
month_format <- format(month_date_range, '%b')
month_df <- data.frame(month_date_range, month_format)
year_date_range <- seq(min(df$start) - months(month_buffer), max(df$start) + months(month_buffer), by='year')
year_date_range <- as.Date(
intersect(
ceiling_date(year_date_range, unit="year"),
floor_date(year_date_range, unit="year")
),  origin = "1970-01-01"
)
year_format <- format(year_date_range, '%Y')
year_df <- data.frame(year_date_range, year_format)
#### PLOT ####
setwd("~/Documents/GradSchool/MSDS455/git_repos/MSDS455_Charlie/visualizations")
png(file = "slide_8_smoking.png",width = 1600, height = 1600)
timeline_plot<-ggplot(df,aes(x=start,y=0, col=text))
timeline_plot<-timeline_plot+labs(col="Milestones")
timeline_plot<-timeline_plot+scale_color_manual(values=rep(blue_heart,6), labels=c("Instantly","6 months","1 year","5 years","10 years","15 years"), drop = FALSE)
timeline_plot<-timeline_plot+theme_classic()
# Plot horizontal black line for timeline
timeline_plot<-timeline_plot+geom_hline(yintercept=0,
color = blue_heart, size=0.3)
# Plot vertical segment lines for milestones
timeline_plot<-timeline_plot+geom_segment(data=df[df$month_count == 1,], aes(y=position,yend=0,xend=start), color=blue_heart, size=0.3)
# Plot scatter points at zero and date
timeline_plot<-timeline_plot+geom_point(aes(y=0), size=3,color=pal_heart)
# Don't show axes, remove legend
timeline_plot<-timeline_plot+theme(axis.line.y=element_blank(),
axis.text.y=element_blank(),
axis.title.x=element_blank(),
axis.title.y=element_blank(),
axis.ticks.y=element_blank(),
axis.text.x =element_blank(),
axis.ticks.x =element_blank(),
axis.line.x =element_blank(),
legend.position = "none")
# Show text for each month
#timeline_plot<-timeline_plot+geom_text(data=month_df, aes(x=month_date_range,y=-0.1,label=month_format),size=2.5,vjust=0.5, color='black', angle=90)
# Show year text
timeline_plot<-timeline_plot+geom_text(data=year_df, aes(x=year_date_range,y=-0.2,label=year_format, fontface="bold"),size=2.5, color=blue_heart)
# Show text for each milestone
timeline_plot<-timeline_plot+geom_text(aes(y=text_position,label=stringr::str_wrap(text, 50)),size=5)
print(timeline_plot)
dev.off()
#Install Packages
list.of.packages <- c("ggplot2", "scales","lubridate")
new.packages <- list.of.packages[!(list.of.packages %in% installed.packages()[,"Package"])]
if(length(new.packages)) install.packages(new.packages)
lapply(list.of.packages, require, character.only = TRUE)
pal_heart <- c("#ff0000", "#7f0000", "#ff6666",  "#ffb2b2", "#E9967A","#A52A2A")
blue_heart <- "#3F69AA"
# set working directory
setwd("~/Documents/GradSchool/MSDS455/git_repos/MSDS455_Charlie/data")
df <- read.table(file="slide8_smoking.txt",sep="\t",header=TRUE,quote="")
df$start = mdy(df$start)
df$text = factor(df$text,levels = levels(df$text)[c(6,3,2,1,4:5)])
status_colors <- c("#ff0000", "#7f0000", "#ff6666",  "#ffb2b2", "#E9967A","#A52A2A")
positions <- c(0.5, -0.5, 1.0, -1.0, 1.5, -1.5)
directions <- c(0.5, -0.5)
line_pos <- data.frame(
"start"=unique(df$start),
"position"=rep(positions, length.out=length(unique(df$start))),
"direction"=rep(directions, length.out=length(unique(df$start)))
)
df <- merge(x=df, y=line_pos, by="start", all = TRUE)
df <- df[with(df, order(start)), ]
text_offset <- 0.05
df$month_count <- ave(df$start==df$start, df$start, FUN=cumsum)
df$text_position <- (df$month_count * text_offset * df$direction) + df$position
head(df)
month_buffer <- 2
month_date_range <- seq(min(df$start) - months(month_buffer), max(df$start) + months(month_buffer), by='month')
month_format <- format(month_date_range, '%b')
month_df <- data.frame(month_date_range, month_format)
year_date_range <- seq(min(df$start) - months(month_buffer), max(df$start) + months(month_buffer), by='year')
year_date_range <- as.Date(
intersect(
ceiling_date(year_date_range, unit="year"),
floor_date(year_date_range, unit="year")
),  origin = "1970-01-01"
)
year_format <- format(year_date_range, '%Y')
year_df <- data.frame(year_date_range, year_format)
#### PLOT ####
setwd("~/Documents/GradSchool/MSDS455/git_repos/MSDS455_Charlie/visualizations")
png(file = "slide_8_smoking.png",width = 1600, height = 1600)
timeline_plot<-ggplot(df,aes(x=start,y=0, col=text))
timeline_plot<-timeline_plot+labs(col="Milestones")
timeline_plot<-timeline_plot+scale_color_manual(values=rep(blue_heart,6), labels=c("Instantly","6 months","1 year","5 years","10 years","15 years"), drop = FALSE)
timeline_plot<-timeline_plot+theme_classic()
# Plot horizontal black line for timeline
timeline_plot<-timeline_plot+geom_hline(yintercept=0,
color = blue_heart, size=0.3)
# Plot vertical segment lines for milestones
timeline_plot<-timeline_plot+geom_segment(data=df[df$month_count == 1,], aes(y=position,yend=0,xend=start), color=blue_heart, size=0.3)
# Plot scatter points at zero and date
timeline_plot<-timeline_plot+geom_point(aes(y=0), size=3,color=pal_heart)
# Don't show axes, remove legend
timeline_plot<-timeline_plot+theme(axis.line.y=element_blank(),
axis.text.y=element_blank(),
axis.title.x=element_blank(),
axis.title.y=element_blank(),
axis.ticks.y=element_blank(),
axis.text.x =element_blank(),
axis.ticks.x =element_blank(),
axis.line.x =element_blank(),
legend.position = "none")
# Show text for each month
#timeline_plot<-timeline_plot+geom_text(data=month_df, aes(x=month_date_range,y=-0.1,label=month_format),size=2.5,vjust=0.5, color='black', angle=90)
# Show year text
timeline_plot<-timeline_plot+geom_text(data=year_df, aes(x=year_date_range,y=-0.2,label=year_format, fontface="bold"),size=2.5, color=blue_heart)
# Show text for each milestone
timeline_plot<-timeline_plot+geom_text(aes(y=text_position,label=stringr::str_wrap(text, 50)),size=5)
print(timeline_plot)
dev.off()
